---
title: "Data Validation for MEData"
author: "Shira Salingre"
date: "2019 Feb 20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(plotly)
library(wesanderson)

medata <- read.csv("all_uvc_data_25-02-19.csv")

```

medata here is the Mediterranean dataframe with the following changes:

* data.origin: “Sala - PEW” to “sala_pew”
* There are some latitudes that equal integers (1,2,3…)
* protection: 35460 replacements for YES in 1; 16278 replacements for NO in 0; 637 replacements of #N/A in NA.

Some more work needed:

- sort out caps and spaces: site names; spp names (also parentheses);  season; 
- species names need to be all changed to genus.spp now some with caps and some with spaces
- spp length in cm I guess?
- should we delete the first column?	

# Location and Max Temp

```{r}
p1 <- ggplot(medata, aes(x = medata$lon, y = medata$lat)) +
  geom_jitter(aes(colour = medata$tmax), show.legend = T) +
  xlab("Longitude") + ylab("Latitude") +
  scale_color_gradient(name = "Max Annual Temp", low = "#3c9ab1", high = "#f22300", na.value = "#899da4")

ggplotly(p1)

```
Looks like we have a problem with some of the latitudes being integers (see file "lat_problem.csv") 

# NA checks

## all NAs

```{r}
medata_na <- subset(medata, is.na(medata))
nrow(medata_na)
```

## tmax and tmin

```{r}
temp_na <- subset(medata, is.na(medata$tmax))
nrow(temp_na)
```

## location

```{r}
loc_na <- subset(medata, is.na(medata$lat))
nrow(loc_na)
```

All of the above can be printed as tables, they're just extremely long.

# Location and MPAs

```{r}
medata$protection <- ifelse(test = medata$protection == 1, yes = TRUE, no = FALSE) # convert to logical
p2 <- ggplot(medata, aes(x = medata$lon, y = medata$lat)) +
  geom_jitter(aes(colour = medata$protection), show.legend = T, alpha = 0.2) +
  xlab("Longitude") + ylab("Latitude") +
  scale_color_discrete(name = "MPAs", na.value = "snow4")

ggplotly(p2)

```

